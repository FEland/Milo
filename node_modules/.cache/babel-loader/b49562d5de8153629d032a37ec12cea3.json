{"ast":null,"code":"import _slicedToArray from \"/Users/femac2/Desktop/milo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/femac2/Desktop/milo/src/CreateQuiz.js\";\nimport React, { useState } from 'react';\nimport Button from \"@material-ui/core/Button\";\nimport PauseCircleFilled from '@material-ui/icons/PauseCircleFilled';\nimport PlayCircleFilled from '@material-ui/icons/PlayCircleFilled';\nimport { Samples } from './Tropes'; // import SpeedIcon from '@material-ui/icons/Speed';\n\nimport DoubleArrowIcon from '@material-ui/icons/DoubleArrow';\nimport CachedIcon from '@material-ui/icons/Cached';\nimport Slider from '@material-ui/core/Slider'; //   function getRandomInt(min, max) {\n//     min = Math.ceil(min);\n//     max = Math.floor(max);\n//     return Math.floor(Math.random() * (max - min)) + min; \n//   }\n\nfunction shuffleTropes(items, num) {\n  //https://stackoverflow.com/questions/18806210/generating-non-repeating-random-numbers-in-js\n  var nums = [];\n  items.forEach(function (element) {\n    if (element.checked) {\n      nums.push(element);\n    }\n  });\n  var ranNums = [];\n  var i = nums.length;\n  var j = 0;\n\n  while (i--) {\n    j = Math.floor(Math.random() * (i + 1));\n    ranNums.push(nums[j]);\n    nums.splice(j, 1);\n  }\n\n  return ranNums.slice(0, num);\n}\n\nfunction createQuiz(items, num) {\n  var order = shuffleTropes(items, num);\n  return order;\n}\n\nexport default function CreateQuiz(_ref) {\n  var _this = this;\n\n  var props = Object.assign({}, _ref);\n  var audio = props.audio;\n  var oldTropes = props.flashcards;\n  var items = [];\n  var arrayLength = oldTropes.length;\n\n  for (var x = 0; x < arrayLength; x++) {\n    if (oldTropes[x].checked === 1) {\n      items.push(oldTropes[x]);\n    }\n  }\n\n  if (oldTropes.length === undefined) {\n    items = Samples;\n  } // let fast = 1;\n\n\n  var speeds = [.5, 1, 1.5, 2, 2.5];\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      restartFlag = _useState2[0],\n      setRestartFlag = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      flag = _useState4[0],\n      _setFlag = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      trope = _useState6[0],\n      _setTrope = _useState6[1];\n\n  var _useState7 = useState(1),\n      _useState8 = _slicedToArray(_useState7, 2),\n      speed = _useState8[0],\n      _setSpeed = _useState8[1]; // const [myState, _setMyState] = React.useState(0);\n\n\n  var tropeRef = React.useRef(trope);\n\n  var setTrope = function setTrope(data) {\n    tropeRef.current = data;\n\n    _setTrope(data);\n  };\n\n  var flagRef = React.useRef(flag);\n\n  var setFlag = function setFlag(data) {\n    flagRef.current = data;\n\n    _setFlag(data);\n  };\n\n  var speedRef = React.useRef(speed);\n\n  var setSpeed = function setSpeed(data) {\n    speedRef.current = data;\n\n    _setSpeed(data);\n  }; // const [speed, setSpeed] = useState(1);\n\n\n  var updateSpeed = function updateSpeed() {\n    // setSpeed(speed => speed = val);\n    setSpeed((speed + 1) % speeds.length); // speed_index = (speed_index + 1) % speeds.length;\n    // console.log(speed_index);\n    // setSpeed(speeds[speed_index]);\n  }; // var speed_index = 1;\n\n\n  var i = 0;\n  var myflag = false; // var speed = 1;\n  // function getSpeed(){\n  //     return speed;\n  // }\n\n  function cont() {\n    var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    // audio.playbackRate = speeds[speed];\n    if (myflag && index < quiz.length) {\n      setTrope(index);\n      setRestartFlag(false);\n      audio.src = quiz[index].sound;\n      var playPromise = audio.play();\n\n      if (playPromise !== undefined) {\n        playPromise.then(function (_) {// Automatic playback started!\n        }).catch(function (error) {// Auto-play failed\n        });\n      }\n    }\n  }\n\n  ;\n\n  var resetFlag = function resetFlag() {\n    flagRef.current = false;\n\n    _setFlag(false);\n\n    myflag = false;\n    setFlag(false);\n  }; // function findIndex (src){\n  //     var w = -1;\n  //     for (w = 0; w < quiz.length; w++){\n  //         let file = './sounds/' + src.replace(/^.*(\\\\|\\/|\\:)/, '')\n  //         if (quiz[w].sound === file){\n  //             return w;\n  //         }\n  //     }\n  //     return quiz.length-1;\n  // }\n\n\n  audio.addEventListener('ended', function () {\n    i = i + 1;\n    audio.playbackRate = speeds[speed];\n\n    if (i < quiz.length) {\n      //todo try or = 1\n      if (i !== quiz.length - 1) {\n        setFlag(true);\n      }\n\n      cont(i);\n    } else {\n      audio.pause();\n      i = 0;\n      setTrope(0);\n      resetFlag();\n      setRestartFlag(true);\n    }\n  }, false);\n\n  var _React$useState = React.useState(createQuiz(items, Math.min(Math.floor(items.length / 2), 8))),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      quiz = _React$useState2[0],\n      _reloadQuiz = _React$useState2[1];\n\n  var _React$useState3 = React.useState(4),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      value = _React$useState4[0],\n      setValue = _React$useState4[1];\n\n  var quizRef = React.useRef(quiz);\n\n  var reloadQuiz = function reloadQuiz(data) {\n    quizRef.current = data;\n\n    _reloadQuiz(data);\n\n    handlePause();\n    i = 0;\n    setTrope(0);\n    resetFlag();\n    setRestartFlag(true);\n  };\n\n  var handleChange = function handleChange(event, newValue) {\n    setValue(newValue);\n    reloadQuiz(createQuiz(items, newValue)); // audio.pause()\n  }; // playFromSong\n\n\n  var playFromSong = function playFromSong(index) {\n    myflag = true;\n    setFlag(true);\n    i = index;\n    setTrope(index);\n    cont(i);\n  };\n\n  function handlePlay() {\n    i = trope;\n    myflag = true;\n    setFlag(true);\n    cont(i);\n  }\n\n  function handlePause() {\n    myflag = false;\n    setFlag(false);\n    audio.pause();\n  }\n\n  audio.playbackRate = speeds[speed];\n  return /*#__PURE__*/React.createElement(\"quiz\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 10\n    }\n  }, \"Quiz Yourself!\", /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"controls\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      maxWidth: '30px',\n      maxHeight: '30px',\n      minWidth: '30px',\n      minHeight: '30px'\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: function onClick() {\n      reloadQuiz(createQuiz(items, value));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CachedIcon, {\n    onClick: function onClick() {\n      reloadQuiz(createQuiz(items, value));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 77\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    style: {\n      maxWidth: '30px',\n      maxHeight: '30px',\n      minWidth: '30px',\n      minHeight: '30px'\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    startIcon: /*#__PURE__*/React.createElement(DoubleArrowIcon, {\n      onClick: function onClick() {\n        updateSpeed();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 34\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 17\n    }\n  }, speeds[speed]), /*#__PURE__*/React.createElement(Button, {\n    style: {\n      maxWidth: '30px',\n      maxHeight: '30px',\n      minWidth: '30px',\n      minHeight: '30px'\n    },\n    size: \"small\",\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Slider, {\n    value: value,\n    onChange: handleChange,\n    defaultValue: Math.min(Math.floor((items.length + 1) / 2), 4),\n    step: 1,\n    min: 0,\n    max: Math.min(items.length, 8),\n    valueLabelDisplay: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 21\n    }\n  })), !restartFlag ? !flag ? /*#__PURE__*/React.createElement(Button, {\n    style: {\n      maxWidth: '30px',\n      maxHeight: '30px',\n      minWidth: '30px',\n      minHeight: '30px'\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: function onClick() {\n      return handlePlay();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(PlayCircleFilled, {\n    onClick: function onClick() {\n      return handlePlay();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 50\n    }\n  })) : /*#__PURE__*/React.createElement(Button, {\n    style: {\n      maxWidth: '30px',\n      maxHeight: '30px',\n      minWidth: '30px',\n      minHeight: '30px'\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: function onClick() {\n      return handlePause();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(PauseCircleFilled, {\n    onClick: function onClick() {\n      return handlePause();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 51\n    }\n  })) : /*#__PURE__*/React.createElement(Button, {\n    style: {\n      maxWidth: '30px',\n      maxHeight: '30px',\n      minWidth: '30px',\n      minHeight: '30px'\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: function onClick() {\n      return handlePlay();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(PlayCircleFilled, {\n    onClick: function onClick() {\n      return handlePlay();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 46\n    }\n  })))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }\n  }, !props.level ? quiz.map(function (songName, index) {\n    return trope === index ? /*#__PURE__*/React.createElement(\"img\", {\n      src: songName.image,\n      onClick: function onClick() {\n        return playFromSong(index);\n      },\n      alt: \"icon\",\n      loading: \"lazy\",\n      width: \"50\",\n      height: \"50\",\n      style: {\n        'opacity': '.5'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 25\n      }\n    }) : /*#__PURE__*/React.createElement(\"img\", {\n      src: songName.image,\n      onClick: function onClick() {\n        return playFromSong(index);\n      },\n      alt: \"icon\",\n      loading: \"lazy\",\n      width: \"50\",\n      height: \"50\",\n      style: {\n        'border': '0px solid black'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 26\n      }\n    });\n  }) : quiz.map(function (songName, index) {\n    return /*#__PURE__*/React.createElement(\"i\", {\n      style: trope === index ? {\n        color: 'black',\n        dir: 'rtl'\n      } : {\n        color: 'yellow',\n        dir: 'rtl'\n      },\n      onClick: function onClick() {\n        return playFromSong(index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 25\n      }\n    }, songName.heb);\n  })));\n}","map":{"version":3,"sources":["/Users/femac2/Desktop/milo/src/CreateQuiz.js"],"names":["React","useState","Button","PauseCircleFilled","PlayCircleFilled","Samples","DoubleArrowIcon","CachedIcon","Slider","shuffleTropes","items","num","nums","forEach","element","checked","push","ranNums","i","length","j","Math","floor","random","splice","slice","createQuiz","order","CreateQuiz","props","audio","oldTropes","flashcards","arrayLength","x","undefined","speeds","restartFlag","setRestartFlag","flag","_setFlag","trope","_setTrope","speed","_setSpeed","tropeRef","useRef","setTrope","data","current","flagRef","setFlag","speedRef","setSpeed","updateSpeed","myflag","cont","index","quiz","src","sound","playPromise","play","then","_","catch","error","resetFlag","addEventListener","playbackRate","pause","min","_reloadQuiz","value","setValue","quizRef","reloadQuiz","handlePause","handleChange","event","newValue","playFromSong","handlePlay","maxWidth","maxHeight","minWidth","minHeight","level","map","songName","image","color","dir","heb"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\nimport Button from \"@material-ui/core/Button\";\nimport PauseCircleFilled from '@material-ui/icons/PauseCircleFilled';\nimport PlayCircleFilled from '@material-ui/icons/PlayCircleFilled';\nimport {Samples} from './Tropes';\n\n// import SpeedIcon from '@material-ui/icons/Speed';\nimport DoubleArrowIcon from '@material-ui/icons/DoubleArrow';\n\nimport CachedIcon from '@material-ui/icons/Cached';\nimport Slider from '@material-ui/core/Slider';\n\n//   function getRandomInt(min, max) {\n//     min = Math.ceil(min);\n//     max = Math.floor(max);\n//     return Math.floor(Math.random() * (max - min)) + min; \n//   }\n\n  function shuffleTropes(items, num){ //https://stackoverflow.com/questions/18806210/generating-non-repeating-random-numbers-in-js\n    let nums = [];\n    items.forEach(element => {\n        if (element.checked){\n            nums.push(element);\n            }\n        });\n\n    let ranNums = [];\n    let i = nums.length;\n    let j = 0;\n\n    while (i--) {\n        j = Math.floor(Math.random() * (i+1));\n        ranNums.push(nums[j]);\n        nums.splice(j,1);\n    }\n    return ranNums.slice(0,num);\n\n  }\n\n\n  function createQuiz(items, num) {\n    let order = shuffleTropes(items, num);\n    return order;\n  }\n\nexport default function CreateQuiz( { ...props} ) {\n\n    var audio = props.audio\n    let oldTropes = props.flashcards;\n    let items = [];\n    var arrayLength = oldTropes.length;\n    for (var x = 0; x < arrayLength; x++) {\n        if (oldTropes[x].checked === 1){\n            items.push(oldTropes[x]);\n        }\n    }\n    if (oldTropes.length === undefined){\n        items = Samples;\n    }\n\n    // let fast = 1;\n    const speeds = [.5, 1, 1.5, 2, 2.5];\n    const [restartFlag, setRestartFlag] = useState(false);\n    const [flag, _setFlag] = useState(false);\n    const [trope, _setTrope] = useState(0);\n    const [speed, _setSpeed] = useState(1);\n\n\n    // const [myState, _setMyState] = React.useState(0);\n\n    const tropeRef = React.useRef(trope);\n    const setTrope = data => {\n        tropeRef.current = data;\n        _setTrope(data);\n    };\n\n    const flagRef = React.useRef(flag);\n    const setFlag = data => {\n        flagRef.current = data;\n        _setFlag(data);\n    };\n\n    const speedRef = React.useRef(speed);\n    const setSpeed = data => {\n        speedRef.current = data;\n        _setSpeed(data);\n    };\n\n    // const [speed, setSpeed] = useState(1);\n\n    const updateSpeed = () => {\n        // setSpeed(speed => speed = val);\n        setSpeed((speed + 1) % speeds.length);\n        // speed_index = (speed_index + 1) % speeds.length;\n        // console.log(speed_index);\n        // setSpeed(speeds[speed_index]);\n      }\n  \n    // var speed_index = 1;\n    var i = 0;\n    var myflag = false;\n    // var speed = 1;\n\n    // function getSpeed(){\n    //     return speed;\n    // }\n\n    function cont (index = 0) {\n\n        // audio.playbackRate = speeds[speed];\n\n        if(myflag && index < quiz.length) {\n            setTrope(index);\n            setRestartFlag(false)\n\n            audio.src = quiz[index].sound;\n\n\n            var playPromise = audio.play();\n\n            if (playPromise !== undefined) {\n                playPromise.then(_ => {\n\n                // Automatic playback started!\n                    \n                })\n                .catch(error => {\n                // Auto-play failed\n                });\n            }\n            \n        }\n    };\n\n\n    const resetFlag = () => {\n        flagRef.current = false;\n        _setFlag(false);\n        myflag = false;\n        setFlag(false);\n    };\n\n    // function findIndex (src){\n    //     var w = -1;\n    //     for (w = 0; w < quiz.length; w++){\n    //         let file = './sounds/' + src.replace(/^.*(\\\\|\\/|\\:)/, '')\n    //         if (quiz[w].sound === file){\n    //             return w;\n    //         }\n    //     }\n    //     return quiz.length-1;\n    // }\n\n    audio.addEventListener('ended', function(){\n        i = i + 1;\n        audio.playbackRate = speeds[speed];\n\n        if (i < quiz.length){\n            //todo try or = 1\n            if (i !== quiz.length-1 ){\n                setFlag(true); \n            }\n            cont(i);\n        } \n        else{\n            audio.pause();\n            \n            i = 0;\n            setTrope(0);\n\n            resetFlag()\n            \n            setRestartFlag(true)\n        }\n\n    }, false);\n\n\n    const [quiz, _reloadQuiz] = React.useState(createQuiz(items, Math.min(Math.floor(items.length/2),8)));\n    const [value, setValue] = React.useState(4);\n    const quizRef = React.useRef(quiz);\n\n    const reloadQuiz = data => {\n        quizRef.current = data;\n        _reloadQuiz(data);\n        handlePause();\n        i = 0;\n        setTrope(0);\n        resetFlag()\n        setRestartFlag(true)\n    };\n\n    const handleChange = (event, newValue) => {\n        setValue(newValue);\n        reloadQuiz(createQuiz(items, newValue));\n        // audio.pause()\n    };\n\n    // playFromSong\n    const playFromSong = (index) => {\n        \n        myflag = true;\n        setFlag(true);\n        i = index;\n        setTrope(index);\n        cont(i);\n\n    };\n\n    function handlePlay(){\n\n        i = trope;\n        myflag = true;\n        setFlag(true);\n        cont(i);\n    }\n\n    function handlePause(){\n\n        myflag = false;\n        setFlag(false);\n        audio.pause();\n\n\n\n    }\n\n    audio.playbackRate = speeds[speed];\n\n\n    return (\n        \n         <quiz>Quiz Yourself!\n            <h5> \n\n            <div className=\"controls\" >\n\n                <Button style={{maxWidth: '30px', maxHeight: '30px', minWidth: '30px', minHeight: '30px'}} variant=\"contained\" color=\"primary\"\n                    onClick={() => {reloadQuiz(createQuiz(items, value));}}><CachedIcon onClick={() => {reloadQuiz(createQuiz(items, value));}}/>\n\n                    {/* endIcon={<CachedIcon  onClick={() => {reloadQuiz(createQuiz(items, value));}}/>}> */}\n                </Button> \n\n                <Button style={{maxWidth: '30px', maxHeight: '30px', minWidth: '30px', minHeight: '30px'}} variant=\"contained\" color=\"primary\"\n                    startIcon = {<DoubleArrowIcon onClick={() => { updateSpeed()}} />}>\n                        {speeds[speed]}\n                </Button> \n\n\n                <Button style={{maxWidth: '30px', maxHeight: '30px', minWidth: '30px', minHeight: '30px'}} size=\"small\" variant=\"contained\"> \n                    <Slider value={value} onChange={handleChange} defaultValue={Math.min(Math.floor((items.length+1)/2),4)}\n                            step={1}  min={0} max={Math.min(items.length, 8)} valueLabelDisplay=\"auto\" />\n                            </Button>\n\n                    \n\n                {/* only shows play or pause based off flag state.. flag doesn't work must be fixed! */}\n                {!restartFlag ? \n                    !flag ? \n                    <Button style={{maxWidth: '30px', maxHeight: '30px', minWidth: '30px', minHeight: '30px'}} variant=\"contained\" color=\"primary\" \n                    onClick={() => handlePlay()}><PlayCircleFilled onClick={() => handlePlay()}/>\n                    </Button> :\n                    <Button style={{maxWidth: '30px', maxHeight: '30px', minWidth: '30px', minHeight: '30px'}} variant=\"contained\" color=\"primary\" \n                    onClick={() => handlePause()}><PauseCircleFilled onClick={() => handlePause()}/>\n                    </Button>\n                : \n                <Button style={{maxWidth: '30px', maxHeight: '30px', minWidth: '30px', minHeight: '30px'}} variant=\"contained\" color=\"primary\" \n                onClick={() => handlePlay()}><PlayCircleFilled onClick={() => handlePlay()}/>\n                </Button>\n                }\n\n            </div>\n\n            </h5>\n\n            <p>\n                {!props.level ? \n\n                    quiz.map((songName, index)=> {return ( \n                        (trope === index) ?\n\n                        <img src={songName.image} onClick={() => playFromSong(index)} alt=\"icon\" loading=\"lazy\" width=\"50\" height=\"50\" style={ {'opacity' : '.5'} }/>\n                        :<img src={songName.image} onClick={() => playFromSong(index)} alt=\"icon\" loading=\"lazy\" width=\"50\" height=\"50\" style={  {'border' : '0px solid black'}  }/>\n\n                    )}) :\n\n                    quiz.map((songName, index)=> {return ( \n                        <i style={(trope === index) ? {color: 'black', dir: 'rtl'} : {color: 'yellow', dir: 'rtl'}} onClick={() => playFromSong(index)}>{songName.heb}</i>\n                    )})\n                }\n            </p>\n        </quiz>\n\n    )\n}\n"]},"metadata":{},"sourceType":"module"}